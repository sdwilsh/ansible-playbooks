---
apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

components:
  - https://github.com/marinatedconcrete/config/kustomization/components/paperless?ref=kustomize-paperless@v1.1.4
configMapGenerator:
  - name: paperless-backup-scripts-configmap
    files:
      - configmap/scripts/backup.sh
images:
  - name: ghcr.io/paperless-ngx/tika
    newTag: 2.9.1-minimal@sha256:20db3df89eaeb1b271dd840888fe909b88b12f4b86ef641ec07a1d45d4c5168f
  - name: gotenberg/gotenberg
    newTag: 8.24.0@sha256:b116a40a1c24917e2bf3e153692da5acd2e78e7cd67e1b2d243b47c178f31c90
patches:
  - path: patches/add_tika.yml
    target:
      kind: StatefulSet
      name: paperless
  - path: patches/mount_memory_tmp.yml
    target:
      kind: StatefulSet
      name: paperless
  - path: patches/pin_pvc_paperless-media.yml
    target:
      kind: PersistentVolumeClaim
      name: paperless-media
resources:
  - clusterrole.yaml
  - clusterrolebinding.yaml
  - cronjob.yml
  - persistentvolume.yml
  - pvc.yml
  - serviceaccount.yml
