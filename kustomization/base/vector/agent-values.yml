---
fullnameOverride: vector-agent
role: Agent

customConfig:
  # API is enabled for the liveness probe.
  api:
    enabled: yes
    address: 127.0.0.1:8686
    playground: no
  data_dir: /vector-data-dir
  sinks:
    aggregator:
      address: vector-aggregator:6000
      inputs:
        - host_metrics
        - internal_metrics
        - kubernetes_logs
      type: vector
    stdout:
      type: console
      inputs:
        - host_metrics
      encoding:
        codec: json
  sources:
    host_metrics:
      filesystem:
        devices:
          excludes:
            - binfmt_misc
        filesystems:
          excludes:
            - binfmt_misc
        mountPoints:
          excludes:
            - "*/proc/sys/fs/binfmt_misc"
      type: host_metrics
    internal_metrics:
      type: internal_metrics
    kubernetes_logs:
      type: kubernetes_logs
