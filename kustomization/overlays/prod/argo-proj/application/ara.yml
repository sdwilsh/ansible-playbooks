---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: ara
  namespace: argocd
spec:
  project: default
  destination:
    server: https://kubernetes.default.svc
    namespace: ara
  sources:
    - chart: mariadb-galera
      repoURL: https://charts.bitnami.com/bitnami
      targetRevision: 7.5.5
      helm:
        parameters:
          - name: db.name
            value: ara
          - name: db.user
            value: ara
          - name: existingSecret
            value: ara-credentials
          - name: namespaceOverride
            value: ara
          - name: persistence.size
            value: 4Gi
          - name: persistence.storageClass
            value: longhorn-crypto-global
          - name: podAntiAffinityPreset
            value: hard
    - path: kustomization/overlays/prod/ara
      repoURL: https://github.com/sdwilsh/ansible-playbooks
      targetRevision: HEAD
  syncPolicy:
    automated: {}
