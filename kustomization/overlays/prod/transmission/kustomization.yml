---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

components:
  - ../../../components/transmission
configMapGenerator:
  - name: protonvpn-configmap
    files:
      - configmap/protonvpn/resolv.conf
  - name: wireguard-scripts-configmap
    files:
      - configmap/scripts/setup_wireguard.sh
images:
  - name: alpine
    newTag: 3.22.2@sha256:4b7ce07002c69e8f3d704a9c5d6fd3053be500b7f1c69fc0d80990c2ad8dd412
  - name: dockurr/dnsmasq
    newTag: 2.91@sha256:7873ce2dae1b0aa51d2c13dd4bd3aad47890c233088b3c7f6eb099a01e6e4307
  - name: lscr.io/linuxserver/transmission
    newTag: 4.0.5-r0-ls223@sha256:bd450da4a328cdf1f89845785150e79b531983b27ab6a1d4c2e3e7dcbf952bfc
namespace: transmission
patches:
  - path: patches/add_downloads_mount.yml
    target:
      kind: StatefulSet
      name: transmission-statefulset
  - path: patches/add_protonvpn.yml
    target:
      kind: StatefulSet
      name: transmission-statefulset
resources:
  - namespace.yml
  - ingress.yml
  - persistentvolume.yml
  - persistentvolumeclaim.yml
