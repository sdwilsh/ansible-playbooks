---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

components:
  - ../../../components/minio
  - ../../../components/postgresql-operator
images:
  - name: quay.io/minio/minio
    newTag: latest@sha256:8834ae47a2de3509b83e0e70da9369c24bbbc22de42f2a2eddc530eee88acd1b
namespace: postgresql
patches:
  - path: patches/minio/set_pods_instance_label.yml
    target:
      kind: StatefulSet
      name: minio-statefulset
  - path: patches/minio/set_root_credentials.yml
    target:
      kind: StatefulSet
      name: minio-statefulset
  - path: patches/minio/set_service_instance_label.yml
    target:
      kind: Service
      name: minio-svc
  - path: patches/minio/use_nfs_storage.yml
    target:
      kind: StatefulSet
      name: minio-statefulset
  - path: patches/postgres-operator/add_logical_backup.yml
    target:
      kind: OperatorConfiguration
      name: postgresql-operator-default-configuration
resources:
  - namespace.yml
  - ingress.yml
  - persistentvolume.yml
  - persistentvolumeclaim.yml
  - podmonitor.yml
