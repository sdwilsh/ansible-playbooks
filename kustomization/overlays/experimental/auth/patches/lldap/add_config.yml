---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: this-is-ignored-but-is-required
spec:
  replicas: 2
  template:
    spec:
      containers:
        - env:
            - name: LLDAP_LDAP_BASE_DN
              value: dc=tswn,dc=us
            - name: LLDAP_HTTP_URL
              value: https://idm.tswn.us
            - name: LLDAP_IGNORED_USER_ATTRIBUTES
              value: "[opencloudexternalidentity,opencloudlastsignintimestamp,openclouduserenabled]"
            - name: LLDAP_JWT_SECRET_FILE
              value: /secrets/lldap/config/LLDAP_JWT_SECRET
            - name: LLDAP_KEY_FILE
              value: ""
            - name: LLDAP_KEY_SEED
              valueFrom:
                secretKeyRef:
                  name: lldap-secret
                  key: LLDAP_KEY_SEED
            - name: LLDAP_LDAP_USER_PASS_FILE
              value: /secrets/lldap/config/LLDAP_LDAP_USER_PASS
          name: lldap
          volumeMounts:
            - mountPath: /secrets/lldap/config
              name: lldap-secrets
              readOnly: true
      volumes:
        - name: lldap-secrets
          secret:
            secretName: lldap-secret
