---
# tasks file for devsetup
- name: Install Required Packages
  ansible.builtin.apt:
    name: "{{ item }}"
    state: present
  become: yes
  loop:
    - zsh
- name: Create sdwilsh group
  ansible.builtin.group:
    name: sdwilsh
    gid: 1000
    state: present
  become: yes
- name: Create sdwilsh user
  ansible.builtin.user:
    group: sdwilsh
    groups:
      - adm
      - dialout
      - cdrom
      - sudo
      - dip
      - plugdev
      - lxd
      - docker
    home: /home/sdwilsh
    name: sdwilsh
    shell: /bin/zsh
    state: present
    uid: 1000
  become: yes
- name: Download & Install Software
  ansible.builtin.include_tasks:
    file: sha256-download.yml
  loop:
    - executable: starship
      # renovate: datasource=github-releases
      sha256: "https://github.com/starship/starship/releases/download/v1.16.0/starship-{{ ansible_architecture }}-unknown-linux-musl.tar.gz.sha256"
      # renovate: datasource=github-releases
      targz: "https://github.com/starship/starship/releases/download/v1.16.0/starship-{{ ansible_architecture }}-unknown-linux-musl.tar.gz"
    - executable: kubectl
      # renovate: datasource=github-releases depName=kubernetes/kubernetes
      sha256: https://dl.k8s.io/release/v1.28.3/bin/linux/amd64/kubectl.sha256
      # renovate: datasource=github-releases depName=kubernetes/kubernetes
      bin: https://dl.k8s.io/release/v1.28.3/bin/linux/amd64/kubectl
- import_tasks: shell.yml
